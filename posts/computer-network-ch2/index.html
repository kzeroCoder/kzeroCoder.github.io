<!DOCTYPE html><html lang="en" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>计算机网络(二) | kzeroCoder</title><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="计算机网络(二)" /><meta name="author" content="Kzero Coder" /><meta property="og:locale" content="en_US" /><meta name="description" content="A minimal, portfolio, sidebar, bootstrap Jekyll theme with responsive web design and focuses on text presentation." /><meta property="og:description" content="A minimal, portfolio, sidebar, bootstrap Jekyll theme with responsive web design and focuses on text presentation." /><link rel="canonical" href="https://kzerocoder.github.io/posts/computer-network-ch2/" /><meta property="og:url" content="https://kzerocoder.github.io/posts/computer-network-ch2/" /><meta property="og:site_name" content="kzeroCoder" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-12-02T15:29:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="计算机网络(二)" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Kzero Coder" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"A minimal, portfolio, sidebar, bootstrap Jekyll theme with responsive web design and focuses on text presentation.","@type":"BlogPosting","headline":"计算机网络(二)","dateModified":"2020-12-02T15:29:00+08:00","datePublished":"2020-12-02T15:29:00+08:00","url":"https://kzerocoder.github.io/posts/computer-network-ch2/","mainEntityOfPage":{"@type":"WebPage","@id":"https://kzerocoder.github.io/posts/computer-network-ch2/"},"author":{"@type":"Person","name":"Kzero Coder"},"@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"> <!-- CSS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <!-- JS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --> <script src="/assets/js/post.min.js" async></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script> <script src="/app.js" defer></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/sample/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">kzeroCoder</a></div><div class="site-subtitle font-italic">No learning, long life</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper"> <!-- Switch the mode between dark and light. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightkMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightkMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border"></span> <a href="https://github.com/kzeroCoder" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:window.open('mailto:' + ['example','doamin.com'].join('@'))" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" > <i class="fas fa-rss"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>计算机网络(二)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Refactor the HTML structure. --> <!-- Suroundding the markdown table with '<div class="table-wrapper">. and '</div>' --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>计算机网络(二)</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Dec 2, 2020, 3:29 PM +0800" > Dec 2, 2020 <i class="unloaded">2020-12-02T15:29:00+08:00</i> </span> by <span class="author"> Kzero Coder </span></div></div><div class="post-content"><head> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } }); </script> <script type="text/x-mathjax-config"> MathJax.Hub.Config({tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } }); </script> <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"> </script><h1 id="第二章-应用层">第二章 应用层</h1><h2 id="21-应用层协议原理">2.1 应用层协议原理</h2><h3 id="211-网络应用程序体系结构">2.1.1 网络应用程序体系结构</h3><p>在应用程序研发者的角度看，网络体系结构式固定的，应用程序体系结构由应用程序研发者涉及。</p><ul><li>客户-服务器体系结构(C/S)<ul><li>服务器需要<ul><li>7*24小时提供服务</li><li>永久性访问地址/域名</li><li>利用大量服务器实现可扩展性</li></ul></li><li>客户机需要<ul><li>与服务器通信，使用服务</li><li>间歇性接入网络</li><li>不与其他客户机直接通信</li></ul></li><li>如：Web、FTP、Telnet和电子邮件</li></ul></li><li>对等体系结构(P2P)<ul><li>没有永远在线的服务器</li><li>任意端系统之间直接通信</li><li>结点可能改变IP地址</li><li>如：文件共享(BitTorrent)、因特网电话、IPTV等</li></ul></li><li>混合结构<ul><li>如Napster<ul><li>文件传输使用P2P结构</li><li>文件检索采用C/S结构</li><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201155655234.png" alt="napster" /></li></ul></li></ul></li></ul><h3 id="212-进程通信">2.1.2 进程通信</h3><p><strong>进程</strong>：运行在端系统中的一个程序。</p><ul><li><p>同一主机，通过端系统操作系统确定。</p></li><li><p>不同主机，通过跨越计算机网络交换<strong>报文</strong>相互通信。</p></li></ul><ol><li>客户和服务器进程<ul><li>将两个进程之一称为客户client，另一进程标识为服务器server</li><li>更具体的说，发起通信进程为client，等待联系的进程式server</li><li>P2P中，一个进程既是客户也是服务器</li></ul></li><li>进程与计算机网络之间的接口<ul><li>进程通过<strong>套接字socket</strong>软件接口向网络发送报文和从网络接收报文。</li><li>由于套接字是建立网络应用程序的可编程接口，也被称为应用程序和网络之间的<strong>应用程序编程接口</strong></li><li>应用开发者对于运输层的控制仅限于<ul><li>选择运输层协议</li><li>设定几个运输层参数(如最大缓存和最大报文段长度)</li></ul></li></ul></li><li>进程寻址<ul><li>为了标识接收进程，需要定义<ul><li>主机地址</li><li>定义在目的主机中的接收进程的标识符</li></ul></li><li>因特网中，主机由<strong>IP地址</strong>标识，目的地<strong>端口号</strong>用于唯一标识网络应用</li><li><strong>进程的标识符 = IP地址 + 端口号</strong></li></ul></li></ol><h3 id="213-可供应用程序使用的运输服务">2.1.3 可供应用程序使用的运输服务</h3><p>大体能够从四个方面对应用程序服务要求进行分类：</p><ol><li>可靠数据传输<ul><li>如果一个协议提供了确保数据交付服务，就认为提供了<strong>可靠数据传输</strong></li><li>由发送进程发送的某些数据可能不能够到达接收进程，这可能能被<strong>容忍丢失的应用</strong>所接收</li></ul></li><li>吞吐量<ul><li>具有吞吐量要求的的应用程序被称为<strong>带宽敏感的应用</strong></li><li><strong>弹性应用</strong>能够根据情况或多或少的利用可供使用的吞吐量</li></ul></li><li>定时<ul><li><strong>实时应用</strong>要求较低时延</li><li><strong>非实时应用</strong>对端对端的时延没有严格约束</li></ul></li><li>安全性<ul><li>加密/解密，提供机密性</li><li>数据完整性、端点鉴别</li></ul></li></ol><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201162127609.png" alt="网络应用需求" /></p><h3 id="214-因特网提供的运输服务">2.1.4 因特网提供的运输服务</h3><ol><li>TCP服务<ul><li>面向连接的服务：通过握手过程，建立两个进程套接字之间的TCP连接，该连接全双工，结束后需要拆除该连接。</li><li>可靠的数据传送服务：依赖TCP、无差错、按适当顺序交付所有发送数据，没有字节的丢失和冗杂。</li><li>拥塞控制、不提供时延保障和最小带宽保障</li></ul></li><li>UDP<ul><li>无连接、不可靠数据传输服务</li><li>不保证报文确认到达，也不保证按序到达</li><li>没有拥塞控制机制</li></ul></li><li>因特网运输协议所不提供的服务<ul><li>不提供吞吐量或定时的保证</li><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201162937529.png" alt="应用层协议和支撑的运输协议" /></li></ul></li></ol><h3 id="215-应用层协议">2.1.5 应用层协议</h3><p><strong>应用层协议</strong>定义了运行在不同端系统上的应用程序进程如何相互传递报文。</p><ul><li>交换的报文类型，如请求报文和响应报文</li><li>各种报文类型的语法，如报文中的各个字段及这些字段是如何描述的</li><li>字段的语义，即这些字段中包含的信息的含义</li><li>一个进程何时以及如何发送报文、对报文进行响应的规则</li></ul><p>公开协议：由RFC定义，用于允许互操作，如HTTP，SMTP，……</p><p>私有协议：用于多数P2P文件共享应用</p><h2 id="22-web和http">2.2 Web和HTTP</h2><h3 id="221-http概况">2.2.1 HTTP概况</h3><p>Web的应用层协议是<strong>超文本传输协议HTTP</strong>，是Web的核心。</p><p>HTTP由两个程序实现：客户程序和服务器程序。</p><p>Web页面由对象组成，如：HTML文件、JPEG图片、视频文件、动态脚本等，且可通过一个统一资源定位器URL地址寻址(格式为Scheme://host:port/path)。</p><p>HTTP是<strong>无状态的</strong>：服务器不维护任何有关客户端过去所发请求的信息。</p><h3 id="222-非持续连接和持续连接">2.2.2 非持续连接和持续连接</h3><ol><li><p>非持续连接的HTTP</p><ul><li><p>每个TCP连接最多允许传输一个对象</p></li><li><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201164515585.png" alt="image-20201201164515585" /></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201164523900.png" alt="image-20201201164523900" /></p></li><li><p><strong>RTT（Round Trip Time）</strong>：从客户端发送一个很小的数据包到服务器并返回所经历的时间。 <strong>响应时间（Response time）</strong>=2RTT+文件发送时间</p></li></ul></li><li><p>采用持续连接的HTTP</p><ul><li>每个TCP连接允许传输多个对象</li><li>类型：<ul><li>无流水的持久性连接<ul><li>客户端只有收到前一个响应后才发送新的请求，每个被引用的对象耗时1个RTT</li></ul></li><li>带流水机制的持久性连接<ul><li>客户端只要遇到一个引用对象就尽快发出请求；理想情况下，收到所有引用对象只需耗时约1个RTT</li></ul></li></ul></li></ul></li></ol><h3 id="223-http报文格式">2.2.3 HTTP报文格式</h3><p>HTTP报文由两种：请求报文和响应报文</p><ol><li>HTTP请求报文<ul><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201165139571.png" alt="image-20201201165139571" /></li><li>用ASCII文本书写，人为可读，每行由一个回车和换行符结束”\r\n”</li><li>第一行叫做<strong>请求行</strong>，包含方法字段、URL字段和HTTP版本字段<ul><li>方法字段可以取<strong>GET、POST、DELETE、PUT(HTTP/1.1，上传)、HEAD(HTTP/1.1，类似GET，但是不返回请求对象)</strong></li></ul></li><li>后继行为<strong>首部行</strong></li><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201165604204.png" alt="HTTP请求报文通用格式" /></li></ul></li><li>HTTP响应报文<ul><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201165918840.png" alt="image-20201201165918840" /></li><li><strong>状态行</strong>：响应消息的第一行<ul><li>200 OK</li><li>301 Moved Permanently</li><li>400 Bad Request</li><li>404 Not Found</li><li>505 HTTP Version Not Supported</li></ul></li><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201170210958.png" alt="HTTP响应报文通用格式" /></li></ul></li></ol><h3 id="224-用户与服务器的交互cookie">2.2.4 用户与服务器的交互：cookie</h3><p>由于HTTP是无状态的，但是某些时候希望将内容与用户身份联系起来，为此某些网站为了辨别用户身份、进行session跟踪而储存在用户本地终端上的数据（通常加密），即cookie。</p><p>cookie技术由4个组件：</p><ul><li>HTTP响应报文中一个cookie首部行</li><li>HTTP请求报文中一个cookie首部行</li><li>用户端系统中保留一个cookie文件，由浏览器管理</li><li>位于Web站点的一个后端数据库</li><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201170550254.png" alt="用cookie跟踪用户状态" /></li></ul><p>用于<strong>身份认证、购物车、推荐、Web email</strong>等，但具有<strong>隐私问题</strong></p><h3 id="225-web缓存">2.2.5 Web缓存</h3><p><strong>Web缓存器</strong>也叫<strong>代理服务器</strong>，既作为客户也作为服务器。用于<strong>缩短客户请求的响应时间、减少机构组织的流量、在大范围内实现有效的内容分发</strong>。</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201171011316.png" alt="客户通过Web缓存器请求对象" /></p><p>Web缓存器通常由<strong>ISP</strong>购买并安装。</p><h3 id="226-条件get方法">2.2.6 条件GET方法</h3><p>HTTP协议通过<strong>条件GET方法</strong>证实对象为最新的。</p><p>如果</p><ol><li>请求报文使用GET方法</li><li>请求报文中包含”If-Modified-Since:”首部行</li></ol><p>那么这个HTTP请求报文就是条件GET请求报文。</p><p>如果缓存版本是最新的，则响应消息包含状态码304 Not Modified，不包含对象。</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201171549937.png" alt="条件GET" /></p><h2 id="23-文件传输协议ftp">2.3 文件传输协议：FTP</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201192425699.png" alt="FTP过程" /></p><p>HTTP和FTP都是文件传输协议，都运行在TCP上，但是FTP使用了两个并行的TCP连接来传输文件，一个是<strong>控制连接</strong>，一个是<strong>数据连接</strong>。</p><ul><li>控制连接用于在两主机之间传输控制信息，如用户标识、口令、该百年远程目录的命令以及”存放put”和”获取get”文件的命令。<ul><li>一般是21端口</li></ul></li><li>数据连接用于实际发送一个文件。<ul><li>一般是20端口</li></ul></li><li>由于FTP使用一个独立的控制连接，所以也称FTP控制信息是<strong>带外</strong>传送的。</li><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201192816779.png" alt="控制连接和数据连接" /></li><li>对会话的每一次文件传输都需要建立一个新的数据连接(即非持续连接)，并且FTP服务器需要保留用户的<strong>状态</strong>。</li></ul><p>FTP的命令和回答</p><ul><li>每个命令由4个大写字母ASCII字符组成：<ul><li>USER username：用于向服务器传送用户标识</li><li>PASS password：用于向服务器发送用户口令</li><li>LIST：用于请求服务器在数据连接上回送当前远程目录中的所有文件列表</li><li>RETR filename：用于从远程主机get文件</li><li>STOR filename：用户在远程主机上put文件</li></ul></li><li>每个命令对应一个回答，是一个3位数字：<ul><li>331 Username OK, Password required</li><li>125 Data connection already open; transfer strating</li><li>425 Can’t open data connetction</li><li>452 Error writing file</li></ul></li></ul><h2 id="24-因特网中的电子邮件">2.4 因特网中的电子邮件</h2><p>因特网电子邮件系统由3个主要组成部分：<strong>用户代理、邮件服务器、简单邮件传输协议SMTP</strong></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201193501868.png" alt="image-20201201193501868" /></p><p><strong>典型邮件发送过程：</strong>发送方用户代理$\rightarrow$发送方的邮件服务器$\rightarrow$接收方的邮件服务器$\rightarrow$接收方的邮箱</p><h3 id="241-smtp">2.4.1 SMTP</h3><p>SMTP限制所有邮件报文的体部分只能采用简单的<strong>7比特ASCII</strong>表示，所以在用SMTP传送邮件之前，需要<strong>将二进制多媒体数据编码为ASCII码</strong>(HTTP不用！！)</p><p>发送报文过程：</p><ol><li>Alice调用邮件代理程序并提供Bob的邮件地址，撰写报文，然后指示代理发送报文</li><li>Alice的代理把报文发给邮件服务器，将报文放在报文队列中</li><li>运行在Alice的邮件服务器上的SMTP客户端发现该报文，创建一个到Bob的邮件服务器上的SMTP服务器的TCP连接</li><li>在Bob的邮件服务器上，SMTP服务器端接收报文，放入Bob的邮箱</li><li>Bob方便的时候，调用代理阅读该报文</li></ol><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201194431297.png" alt="发送报文过程" /></p><blockquote><p>例子：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201194542066.png" alt="Alice通话历史" /></p></blockquote><p>每个报文由<strong>CRLF.CRLF</strong>结束，其中CR和LF分别表示回车和换行。</p><p>SMTP采用<strong>持续连接</strong></p><h3 id="242-与http的对比">2.4.2 与HTTP的对比</h3><ul><li><p>同：</p><ul><li>从一台主机向另一台主机传送文件</li><li>持续的HTTP和SMTP都使用持续连接</li></ul></li><li><p>异：</p><ul><li><p>HTTP是一个<strong>拉pull协议</strong>，在Web服务器上装在信息，用户通过HTTP拉取</p><p>SMTP是一个<strong>推协议</strong>，发送邮件服务器把文件推向接收邮件服务器</p></li><li><p>SMTP需要每个报文使用7比特ASCII字符</p><p>HTTP没有限制</p></li><li><p>HTTP把每个对象封装到自己的HTTP响应报文中</p><p>SMTP把所有报文对象放在一个报文中</p></li></ul></li></ul><h3 id="243-邮件报文格式和mime">2.4.3 邮件报文格式和MIME</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201195323196.png" alt="Email消息格式" /></p><p>头部行Header必须要有To、From，可能有Subject</p><p>消息体body包含消息本身(ASCII码)</p><p><strong>MIME</strong>：<strong>多媒体邮件扩展 RFC 2045</strong><strong>，2056</strong>（用于新增多媒体内容）</p><ul><li>通过在邮件头部增加额外的行以声明MIME的内容类型</li><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201195531220.png" alt="MIME例子" /></li></ul><h3 id="244-邮件访问协议">2.4.4 邮件访问协议</h3><p>取报文是一个拉操作，不能使用SMTP协议。</p><p>因此引入一些邮件访问协议来完成取报文操作：<strong>第三版的邮局协议 POP3、因特网邮件访问协议 IMAP、HTTP</strong></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201195746787.png" alt="电子邮件协议及其通信实体" /></p><ol><li><p>POP3</p><ul><li><p>当用户代理打开一个到邮件服务器端口<strong>110</strong>上的TCP连接，POP3就开始工作</p></li><li><p>POP3有三个阶段：</p><ul><li>特许<ul><li>用户代理明文发送用户名和口令，以鉴别用户</li><li>命令：user, pass</li></ul></li><li>事务处理<ul><li>用户代理取回报文</li><li>同时，对报文做删除标记，取消报文删除标记，以及获取邮件的统计信息</li><li>命令：list、retr、dele、quit</li></ul></li><li>更新<ul><li>在用户发出quit命令后，结束该POP3会话</li><li>此时，邮件服务器删除那些被标记为删除的报文</li></ul></li></ul></li><li><p>回答：+OK，-ERR</p></li><li><p>“下载并删除”模式（更换客户端软件，无法重读）</p><p>“下载并保持”模式（不同客户端都可以保留消息的拷贝）</p></li></ul></li><li><p>IMAP</p><ul><li>为了实现建立邮件文件夹，在邮件文件夹中删除报文、移动报文、查询报文的功能，需要IMAP提供船舰远程文件夹并为报文指派文件夹的方法。</li><li>IMAP具有允许用户代理获取报文组件的命令，例如指读取一个报文的首部，或指示一个多部分MIME报文的一部分。</li></ul></li><li><p>基于Web的电子邮件</p></li></ol><h2 id="25-dns因特网的目录服务">2.5 DNS：因特网的目录服务</h2><h3 id="251-dns提供的服务">2.5.1 DNS提供的服务</h3><p>人们喜欢便于记忆的主机名标识方式，而路由器则喜欢定长的、有层次结构的IP地址$\rightarrow$需要一种能进行主机名到IP地址转换的目录服务，即<strong>域名系统DNS</strong></p><p>DNS：</p><ol><li>一个由分层的DNS服务器实现的分布式数据库</li><li>一个使得主机能够查询分布式数据库的应用层协议<ul><li>DNS服务器通常是运行在BIND软件的UNIX机器，DNS协议运行在UDP之上，使用<strong>53</strong>号端口</li></ul></li></ol><blockquote><p>考虑某个用户主机上的一个浏览器请求URL www.someschool.edu/index.html：</p><ul><li>同一台用户主机上运行着DNS应用的客户端</li><li>浏览器从URL中抽取出主机名 www.someschool.edu，并传给DNS应用的客户端</li><li>DNS客户向DNS服务器发送一个包含主机名的请求</li><li>DNS客户最终会收到一份回答报文，其中含有对应该主机名的IP地址</li><li>一旦浏览器接收到来自DNS的该IP地址，向位于该IP地址80端口的HTTP服务器进程发起TCP连接</li></ul></blockquote><p>DNS的其他服务：</p><ul><li><strong>主机别名</strong>：拥有复杂主机名的主机能够拥有一个或者多个别名。</li><li><strong>邮件服务器别名</strong></li><li><strong>负载分配</strong>：繁忙的站点被冗杂分布在多台服务器上，每台服务器均运行在不同端系统上，每个都有着不同的IP地址。DNS数据库中存储所有IP地址集合，客户发出DNS请求时，该服务器用IP地址的整个集合进行相应，但在每个回答中循环这些地址次序，客户通常总是向IP地址排在最前面的服务器发送HTTP请求报文。</li></ul><h3 id="252-dns工作机理概述">2.5.2 DNS工作机理概述</h3><p>DNS的一种简单设计时在因特网上只使用一个DNS服务器，包含所有的映射，但是有以下问题：</p><ul><li><strong>单点故障</strong>。DNS服务器崩溃会造成整个因特网瘫痪</li><li><strong>通信容量</strong>。需要处理所有的DNS查询</li><li><strong>远距离的集中式数据库。</strong>对部分地区远距离</li><li><strong>维护</strong>。为所有因特网主机保留数据</li></ul><p>实际上DNS是分布式的：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201202810562.png" alt="DNS分布式数据库结构" /></p><ol><li><p>分布式、层次数据库</p><ul><li><p>根DNS服务器</p><ul><li><p>本地域名服务器解析服务器无法解析域名时，当问根域名服务器</p><p>根域名服务器如果不知道映射，访问权威域名服务器；否则获取映射，并向本地域名服务器返回</p></li></ul></li><li><p>顶级域名(TLD) DNS服务器</p><ul><li>负责<strong>com, org, net, edu</strong>等顶级域名和国家顶级域名，如<strong>cn, uk, fr</strong>等</li></ul></li><li><p>权威DNS服务器</p><ul><li>权威域名服务器是组织的域名解析服务器，提供组织内部服务器的解析服务</li><li>组织和服务提供商负责维护</li></ul></li></ul><p><strong>本地DNS服务器</strong>严格来说不数据服务器的层次结构，但每个ISP都有一个。当主机进行DNS查询时，查询被发送到本地域名服务器。</p><blockquote><p><strong>查询</strong></p><ul><li><p>迭代查询：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201203719875.png" alt="迭代查询" /></p></li><li><p>递归查询：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201203745421.png" alt="递归查询" /></p></li></ul></blockquote></li><li><p>DNS缓存</p><ul><li>为了改善时延性能并减少在因特网上到处传输的DNS报文数量</li><li>原理：本地DNS服务器暂时(一般2天)缓存DNS回答信息在本地存储器中</li></ul></li></ol><h3 id="253-dns记录和报文">2.5.3 DNS记录和报文</h3><p>所有DNS服务器存储了四元组<strong>资源记录 RR</strong>：(Name, Value, Type, TTL)</p><ul><li>Type = A，Name是主机名，Value是主机名对应的IP地址</li><li>Type = NS，Name是一个域，Value是知道如何获取该域中主机IP地址的权威DNS服务器的主机域名</li><li>Type = CNAME，Name是真实域名的别名，Value是真实域名</li><li>Type = MX，Value是Name对应的邮件服务器</li></ul><ol><li><p>DNS报文</p><ul><li><p>DNS有查询和回答报文，报文格式如下：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201204818975.png" alt="DNS报文格式" /></p></li><li><p>前12个字节是<strong>首部区域</strong></p><ul><li><strong>标识符</strong>：16比特的数，用于标识该查询，匹配请求和回答</li><li><strong>标志</strong>：含有若干标志<ul><li>1比特的”查询/回答”标志位指出报文是查询报文(0)还是回答报文(1)</li><li>1比特的”权威的”标志位</li><li>1比特的”希望递归”标志位</li></ul></li></ul></li><li><p><strong>问题区域</strong>包含正在查询的信息</p><ul><li><strong>名字字段</strong>：被查询主机的名字</li><li><strong>类型字段</strong>：指出有关改名字的被询问的问题类型</li></ul></li><li><p><strong>回答区域</strong>包含对最初请求的名字的资源记录，可以有多条RR</p></li><li><p><strong>权威区域</strong>包含了其他权威服务器的记录</p></li><li><p><strong>附加区域</strong>包含了其他有帮助的记录</p></li></ul></li><li><p>在DNS数据库中插入记录</p><ol><li>向注册登记机构注册域名时，需要提供基本和辅助权威DNS服务器的名字和IP地址</li><li>注册登记机构确保将一个类型NS和一个类型A的记录输入TLD com服务器</li><li>确保用于Web服务器的类型A资源记录域用于邮件服务器的类型MX资源记录被输入权威DNS服务器</li></ol><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201205912299.png" alt="例子" /></p></li></ol><h2 id="26-p2p应用">2.6 P2P应用</h2><h3 id="261-p2p文件分发">2.6.1 P2P文件分发</h3><ol><li><p>P2P体系结构的扩展性</p><blockquote><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201210327928.png" alt="文件分发问题的示例图" /></p><p>$u_s$表示服务器接入链路上的上载速率，$u_i$表示第$i$对等方接入链路的上载速率，$d_i$表示了第$i$对等放接入链路的下载速率，$F$表示被分发的文件长度，$N$表示要获得的该文件副本的对等方的数量。</p><p>假设以C/S结构进行传输： \(t=\max\{NF/u_s, F/\min_\limits{i}(d_i)\}\) 假设以P2P结构进行传输： \(t=\max\{F/u_s, F/\min_\limits{i}(d_i), NF/(u_s+\sum_{i}u_i)\}\) 以$u_s=10u,\ u_i=u,\ F/u=1h,\ d_{min}\ge u_s$条件下以$N$为变量画$N-t$图：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201211153080.png" alt="N-t图" /></p></blockquote></li><li><p>BitTorrent</p><blockquote><p>参与一个也顶文件分发的所有对等方的集合被称为一个洪流 torrent。在一个洪流中的对等方彼此下载等长度的文件块 chunk (典型的块长度为256KB)。</p><p>当一个对等方首次加入一个洪流时，没有块。随着时间流逝，累积越来越多的块。</p><p>当它下载块时，也为其他对等方上载了多个块。</p><p>该对等方获得整个文件后，可以离开或者留在该洪流。</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201211853688.png" alt="BitTorrent分发文件" /></p><p>当一个新的对等方Alice加入洪流时，追踪器随机地从参与对等方的集合中选择对等方的一个子集(设50个)，并将这50个对等方的IP地址发送给Alice。</p><p>Alice试图域该列表上的所有对等方创建并行的TCP连接</p><ul><li>Alice成功创建一个TCP连接的对等方为”邻近对等方”(图中为3个)</li></ul><p>随着对等方中某些可能离开，其他对等方(最初50个以外的)可能试图与Alice创建TCP连接(对等方的邻近对等方将随时间而波动)</p><p><strong>获取chunk</strong></p><ul><li>给定任一时刻，不同节点持有文件不同chunk集合</li><li>节点（Alice）定期查询每个邻居所持有的chunk列表</li><li>节点发送请求，请求获取缺失的chunk<strong>（以稀缺优先）</strong></li></ul><p><strong>发送chunk</strong></p><ul><li>Alice向四个邻居发送chunk<strong>（选取正在向其发送chunk中速率最快的4个，每10秒重新评估）</strong></li><li>每30s随机选择一个其他节点，向其发送chunk<strong>（新选择节点可能加入top4）</strong></li><li>上传速率高，则更能找到更好的交易伙伴，从而更快的获取文件</li></ul></blockquote></li><li><p>索引技术</p><p>索引：信息到节点位置（IP地址+端口号）的映射</p><left><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201213113942.png" alt="image-20201201213113942" style="zoom:100%;" /></left><ul><li><p><strong>集中式索引</strong></p><ul><li>内容和文件传输时分布式的，但是内容定位时高度集中式的。</li><li>存在<strong>单点失效问题、性能瓶颈、版权问题。</strong></li><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201213308884.png" alt="集中式索引" /></li></ul></li><li><p><strong>洪泛式查询：Query flooding</strong></p><ul><li>完全分布式系统。每个节点对它共享的文件进行索引，且只对它共享的文件进行索引。</li><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201213417098.png" alt="泛洪式查询" /></li></ul></li><li><p><strong>层次式覆盖网络</strong></p><ul><li><p>每个节点或者是一个<strong>超级节点</strong>，或者被<strong>分配一个超级节点</strong></p><p>节点和超级节点间、某些超级节点对间维持TCP连接</p><p>超级节点负责跟踪子节点的内容</p></li><li><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201213500699.png" alt="层次式覆盖网络" /></p></li><li><p>例如<strong>Skype</strong>：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201201213540307.png" alt="Skype" /></p></li><li><p>本质是P2P的：用户/节点对之间直接通信</p><p>应用层协议是<strong>私有</strong>的</p><p><strong>层次式覆盖网络</strong></p><p>索引负责<strong>维护用户名与</strong><strong>IP</strong><strong>地址间的映射</strong></p><p>索引分布在<strong>超级节点</strong>上</p></li></ul></li></ul></li></ol><h3 id="262-分布式散列表">2.6.2 分布式散列表</h3><p>构造一个C/S结构的数据库，以在一个中心服务器中存储的所有(key, value)对。在该P2P系统中，每个对等方将保持(key, value)对仅占总体的一个小子集。我们允许任何对等方用一个特别的键来查询该分布式数据库。分布式数据库将定位拥有该相应(key, value)对的对等方，然后向查询的对等方返回该(key, value)对。任何对等方也将允许在数据库中插入新键-值对。这样一种分布式数据库被称为<strong>分布式散列表 DHT</strong></p><ol><li>环形DHT<ul><li>考虑将对等方组织成一个环，每个对等方仅与它的直接后继和直接前任联系</li><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201202102903808.png" alt="确定最邻近键" /><ul><li>现在3要确定谁负责键11，绕环顺时针发送报文，直到12</li><li>通过捷径可以大大减少用于处理查询的报文数量</li></ul></li></ul></li><li>对等方扰动<ul><li>为了处理对等方扰动，要求每个对等方联系其第一个和第二个后继。</li><li>要求每个对等方周期性地验证它地两个后继是存活的。</li><li>这样当某个对等方离开，其前继会寻找前继的第二后继进行连接建立</li><li>加入的时候从1开始顺时针询问前继后继</li></ul></li></ol><h2 id="27-tcp套接字编程">2.7 TCP套接字编程</h2><h3 id="271-udp套接字编程">2.7.1 UDP套接字编程</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201202103614601.png" alt="使用UDP的C/S应用程序" /></p><h3 id="272-tcp套接字编程">2.7.2 TCP套接字编程</h3><p>TCPServer进程有两个套接字，一个用于获取连接请求，另一个用于连接：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201202103750425.png" alt="TCPServer的两个套接字" /></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="/assets/img/computerNetwork/computerNetworkCh2/image-20201202103821535.png" alt="使用TCP的C/S应用程序" /></p><h3 id="273-一些c语言socket函数补充">2.7.3 一些C语言Socket函数补充</h3><blockquote><p>WSAStartup：初始化socket库</p><p>WSACleanup：清楚/终止socket库的使用</p><p>socket：创建套接字</p><p>connect：”连接”远程服务器(客户端用)</p><p>closesocket：释放/关闭套接字</p><p>bind：绑定套接字的本地IP地址和端口号(通常客户端不需要)</p><p>listen：置服务器端TCP套接字为监听状态，并设置队列大小(仅用于服务器端TCP套接字)</p><p>accept：接收/提取一个连接请求，创建新套接字(仅用于服务器端TCP套接字)</p><p>recv：接收数据(用于TCP套接字或连接模式的客户端UDP套接字)</p><p>recvfrom：接收数据报(用于非连接的UDP套接字)</p><p>send：发送数据(用于TCP套接字或连接模式的客户端UDP套接字)</p><p>sendto：发送数据报(用于非连接的UDP套接字)</p><p>setsocketopt：设置套接字选项参数</p><p>getsocketopt：获取套接字选项参数</p></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/blogging/'>Blogging</a>, <a href='/categories/computer-network/'>Computer Network</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/writing/" class="post-tag no-text-decoration" >writing</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=计算机网络(二) - kzeroCoder&url=https://kzeroCoder.github.io/posts/computer-network-ch2/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=计算机网络(二) - kzeroCoder&u=https://kzeroCoder.github.io/posts/computer-network-ch2/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=计算机网络(二) - kzeroCoder&url=https://kzeroCoder.github.io/posts/computer-network-ch2/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/java-notes-pt3/">Java杂记——StringBuilder，Comparator和Comparable</a></li><li><a href="/posts/java-notes-pt4/">Java杂记——数组和双轴排序</a></li><li><a href="/posts/java-notes-pt1/">Java杂记——容器</a></li><li><a href="/posts/machine-learning-ch1/">机器学习笔记(一)</a></li><li><a href="/posts/machine-learning-ch4/">机器学习笔记(四)</a></li></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/typography/">typography</a> <a class="post-tag" href="/tags/writing/">writing</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-2">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post, if the number is not enough, use the other latest posts to supplement. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/computer-network-ch1/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Dec 1, 2020 <i class="unloaded">2020-12-01T15:29:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>计算机网络(一)</h3><div class="text-muted small"><p> 第一章 计算机网络与因特网 1.1 什么是因特网 构成因特网的基本硬件和软件组件 为分布式应用提供服务的联网基础设施 定义：计算机网络就是互连的、自治的计算机集合。 1.1.1 具体构成描述(P2) 1.1.2 服务描述 分布式应用程序：涉及多台相互交换数据的端系统的应用程序(如，电子邮件、Web冲浪、P2P文件共享等) 应用...</p></div></div></a></div><div class="card"> <a href="/posts/machine-learning-ch4/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Nov 4, 2020 <i class="unloaded">2020-11-04T18:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>机器学习笔记(四)</h3><div class="text-muted small"><p> 贝叶斯分类器，条件独立和朴素贝叶斯 条件独立 定义：X与Y在给定Z的情况下条件独立，当X的概率分布在给定Z的情况下与Y值独立，数学表示为： [(\forall i,j,k)P(X=x_i Y=y_j,Z=z_k)=P(X=x_i Z=z_k)] 一般写作： ...</p></div></div></a></div><div class="card"> <a href="/posts/machine-learning-ch5/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Nov 10, 2020 <i class="unloaded">2020-11-10T18:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>机器学习笔记(五)</h3><div class="text-muted small"><p> 支持向量机SVM SVM是定义在特征空间上的，间隔最大的线性分类器，是一种二分类模型。 SVM支持处理线性可分数据集和非线性可分数据集： 训练数据集线性可分时，通过硬间隔最大化，学习一种线性分类器 训练数据集近似线性可分时，通过软间隔最大化，学习一种线性分类器 训练数据集不可分时，通过使用核技巧和软间隔最大化，学习一种非线性分类器 ...</p></div></div></a></div></div></div><!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/computer-network-ch1/" class="btn btn-outline-primary"><p>计算机网络(一)</p></a> <a href="/posts/java-notes-pt1/" class="btn btn-outline-primary"><p>Java杂记——容器</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/username">kzeroCoder</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/">Chirpy</a> theme.</p></div></div></footer></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/typography/">typography</a> <a class="post-tag" href="/tags/writing/">writing</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', '', 'auto'); ga('send', 'pageview'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://kzeroCoder.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
